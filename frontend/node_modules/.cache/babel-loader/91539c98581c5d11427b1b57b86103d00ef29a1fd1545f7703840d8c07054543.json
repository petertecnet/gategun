{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport router from '../router/index.js';\n\n// Adicione o interceptor após a importação do axios e antes de declarar as funções\naxios.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers['Authorization'] = `Bearer ${token}`;\n  }\n  return config;\n});\nconst login = (email, password) => {\n  const data = {\n    email: email,\n    password: password\n  };\n  return axios.post('http://127.0.0.1:8000/api/login', data).then(response => {\n    if (response.data.success) {\n      const token = response.data.token;\n      localStorage.setItem('token', token);\n\n      // Login bem-sucedido, redirecionar para a página Home\n      router.push('/home');\n    } else {\n      // Exibir mensagem de erro no console\n      console.error(response.data.message);\n    }\n    return response.data;\n  }).catch(error => {\n    // Tratamento de erro\n    throw error;\n  });\n};\nconst register = (name, email, password) => {\n  const data = {\n    name: name,\n    email: email,\n    password: password\n  };\n  return axios.post('http://127.0.0.1:8000/api/register', data).then(response => {\n    // Lógica de manipulação da resposta do servidor após o registro\n    return response.data;\n  }).catch(error => {\n    // Tratamento de erro\n    throw error;\n  });\n};\nexport const checkAuth = () => {\n  return new Promise((resolve, reject) => {\n    axios.get('http://127.0.0.1:8000/api/check-auth').then(response => {\n      const authenticated = response.data.authenticated;\n      if (authenticated) {\n        // Usuário autenticado, prosseguir para as rotas protegidas\n        resolve();\n      } else {\n        // Usuário não autenticado, redirecionar para a tela de login\n        reject(new Error('Usuário não autenticado'));\n      }\n    }).catch(() => {\n      // Erro ao verificar a autenticação, redirecionar para a tela de login\n      reject(new Error('Erro ao verificar autenticação'));\n    });\n  });\n};\nexport default {\n  login,\n  register,\n  checkAuth\n};","map":{"version":3,"names":["axios","router","interceptors","request","use","config","token","localStorage","getItem","headers","login","email","password","data","post","then","response","success","setItem","push","console","error","message","catch","register","name","checkAuth","Promise","resolve","reject","get","authenticated","Error"],"sources":["C:/xampp/htdocs/gategun/frontend/src/services/AuthService.js"],"sourcesContent":["import axios from 'axios';\r\nimport router from '../router/index.js';\r\n\r\n// Adicione o interceptor após a importação do axios e antes de declarar as funções\r\naxios.interceptors.request.use(config => {\r\n  const token = localStorage.getItem('token');\r\n  if (token) {\r\n    config.headers['Authorization'] = `Bearer ${token}`;\r\n  }\r\n  return config;\r\n});\r\n\r\nconst login = (email, password) => {\r\n  const data = {\r\n    email: email,\r\n    password: password\r\n  };\r\n\r\n  return axios.post('http://127.0.0.1:8000/api/login', data)\r\n    .then(response => {\r\n      if (response.data.success) {\r\n        const token = response.data.token;\r\n        localStorage.setItem('token', token);\r\n\r\n        // Login bem-sucedido, redirecionar para a página Home\r\n        router.push('/home');\r\n      } else {\r\n        // Exibir mensagem de erro no console\r\n        console.error(response.data.message);\r\n      }\r\n      return response.data;\r\n    })\r\n    .catch(error => {\r\n      // Tratamento de erro\r\n      throw error;\r\n    });\r\n};\r\n\r\nconst register = (name, email, password) => {\r\n  const data = {\r\n    name: name,\r\n    email: email,\r\n    password: password,\r\n  };\r\n\r\n  return axios.post('http://127.0.0.1:8000/api/register', data)\r\n    .then(response => {\r\n      // Lógica de manipulação da resposta do servidor após o registro\r\n      return response.data;\r\n    })\r\n    .catch(error => {\r\n      // Tratamento de erro\r\n      throw error;\r\n    });\r\n};\r\n\r\nexport const checkAuth = () => {\r\n  return new Promise((resolve, reject) => {\r\n    axios\r\n      .get('http://127.0.0.1:8000/api/check-auth')\r\n      .then(response => {\r\n        const authenticated = response.data.authenticated;\r\n        if (authenticated) {\r\n          // Usuário autenticado, prosseguir para as rotas protegidas\r\n          resolve();\r\n        } else {\r\n          // Usuário não autenticado, redirecionar para a tela de login\r\n          reject(new Error('Usuário não autenticado'));\r\n        }\r\n      })\r\n      .catch(() => {\r\n        // Erro ao verificar a autenticação, redirecionar para a tela de login\r\n        reject(new Error('Erro ao verificar autenticação'));\r\n      });\r\n  });\r\n};\r\n\r\nexport default {\r\n  login,\r\n  register,\r\n  checkAuth\r\n};\r\n"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,MAAM,MAAM,oBAAoB;;AAEvC;AACAD,KAAK,CAACE,YAAY,CAACC,OAAO,CAACC,GAAG,CAACC,MAAM,IAAI;EACvC,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,IAAIF,KAAK,EAAE;IACTD,MAAM,CAACI,OAAO,CAAC,eAAe,CAAC,GAAI,UAASH,KAAM,EAAC;EACrD;EACA,OAAOD,MAAM;AACf,CAAC,CAAC;AAEF,MAAMK,KAAK,GAAGA,CAACC,KAAK,EAAEC,QAAQ,KAAK;EACjC,MAAMC,IAAI,GAAG;IACXF,KAAK,EAAEA,KAAK;IACZC,QAAQ,EAAEA;EACZ,CAAC;EAED,OAAOZ,KAAK,CAACc,IAAI,CAAC,iCAAiC,EAAED,IAAI,CAAC,CACvDE,IAAI,CAACC,QAAQ,IAAI;IAChB,IAAIA,QAAQ,CAACH,IAAI,CAACI,OAAO,EAAE;MACzB,MAAMX,KAAK,GAAGU,QAAQ,CAACH,IAAI,CAACP,KAAK;MACjCC,YAAY,CAACW,OAAO,CAAC,OAAO,EAAEZ,KAAK,CAAC;;MAEpC;MACAL,MAAM,CAACkB,IAAI,CAAC,OAAO,CAAC;IACtB,CAAC,MAAM;MACL;MACAC,OAAO,CAACC,KAAK,CAACL,QAAQ,CAACH,IAAI,CAACS,OAAO,CAAC;IACtC;IACA,OAAON,QAAQ,CAACH,IAAI;EACtB,CAAC,CAAC,CACDU,KAAK,CAACF,KAAK,IAAI;IACd;IACA,MAAMA,KAAK;EACb,CAAC,CAAC;AACN,CAAC;AAED,MAAMG,QAAQ,GAAGA,CAACC,IAAI,EAAEd,KAAK,EAAEC,QAAQ,KAAK;EAC1C,MAAMC,IAAI,GAAG;IACXY,IAAI,EAAEA,IAAI;IACVd,KAAK,EAAEA,KAAK;IACZC,QAAQ,EAAEA;EACZ,CAAC;EAED,OAAOZ,KAAK,CAACc,IAAI,CAAC,oCAAoC,EAAED,IAAI,CAAC,CAC1DE,IAAI,CAACC,QAAQ,IAAI;IAChB;IACA,OAAOA,QAAQ,CAACH,IAAI;EACtB,CAAC,CAAC,CACDU,KAAK,CAACF,KAAK,IAAI;IACd;IACA,MAAMA,KAAK;EACb,CAAC,CAAC;AACN,CAAC;AAED,OAAO,MAAMK,SAAS,GAAGA,CAAA,KAAM;EAC7B,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;IACtC7B,KAAK,CACF8B,GAAG,CAAC,sCAAsC,CAAC,CAC3Cf,IAAI,CAACC,QAAQ,IAAI;MAChB,MAAMe,aAAa,GAAGf,QAAQ,CAACH,IAAI,CAACkB,aAAa;MACjD,IAAIA,aAAa,EAAE;QACjB;QACAH,OAAO,CAAC,CAAC;MACX,CAAC,MAAM;QACL;QACAC,MAAM,CAAC,IAAIG,KAAK,CAAC,yBAAyB,CAAC,CAAC;MAC9C;IACF,CAAC,CAAC,CACDT,KAAK,CAAC,MAAM;MACX;MACAM,MAAM,CAAC,IAAIG,KAAK,CAAC,gCAAgC,CAAC,CAAC;IACrD,CAAC,CAAC;EACN,CAAC,CAAC;AACJ,CAAC;AAED,eAAe;EACbtB,KAAK;EACLc,QAAQ;EACRE;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}